apiVersion: "nais.io/v1alpha1"
kind: "Application"
metadata:
  labels:
    team: {{team}}
  name: {{app_name}}
  namespace: default
spec:
  image: {{version}}
  port: {{port}}
  team: {{team}}
  liveness:
    path: {{liveness_path}}
    initialDelay: 10
    timeout: 1
    periodSeconds: 5
    failureThreshold: 3
  readiness:
    path: {{readiness_path}}
    initialDelay: 10
    timeout: 1
  replicas:
    min: 1
    max: 4
    cpuThresholdPercentage: 80
  resources:
    limits:
      cpu: 200m
      memory: 256Mi
    requests:
      cpu: 100m
      memory: 128Mi
  ingresses:
    - https://arbeidsgiver.nav.no{{path_prefix}}
  env:
    - name: APP_VERSION
      value: {{version}}
    - name: STILLINGESBACKEND_URL
      value: http://tpa-stilling-opendistro-elasticsearch.tpa:9200

